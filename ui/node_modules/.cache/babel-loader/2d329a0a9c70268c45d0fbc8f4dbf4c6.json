{"ast":null,"code":"import { throwServerError } from \"../utils/index.js\";\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nexport function parseAndCheckHttpResponse(operations) {\n  return function (response) {\n    return response.text().then(function (bodyText) {\n      try {\n        return JSON.parse(bodyText);\n      } catch (err) {\n        var parseError = err;\n        parseError.name = 'ServerParseError';\n        parseError.response = response;\n        parseError.statusCode = response.status;\n        parseError.bodyText = bodyText;\n        throw parseError;\n      }\n    }).then(function (result) {\n      if (response.status >= 300) {\n        throwServerError(response, result, \"Response not successful: Received status code \".concat(response.status));\n      }\n\n      if (!Array.isArray(result) && !hasOwnProperty.call(result, 'data') && !hasOwnProperty.call(result, 'errors')) {\n        throwServerError(response, result, \"Server response was missing for query '\".concat(Array.isArray(operations) ? operations.map(function (op) {\n          return op.operationName;\n        }) : operations.operationName, \"'.\"));\n      }\n\n      return result;\n    });\n  };\n}","map":{"version":3,"mappings":"AACA,SAASA,gBAAT,QAAiC,mBAAjC;AAEQ,kBAAc,GAAKC,MAAM,CAACC,SAAP,CAAgBC,cAAnC;AAQR,OAAM,SAAUC,yBAAV,CACJC,UADI,EAC+B;EAEnC,OAAO,UAACC,QAAD,EAAmB;IAAK,eAAQ,CACpCC,IAD4B,GAE5BC,IAF4B,CAEvB,oBAAQ;MACZ,IAAI;QACF,OAAOC,IAAI,CAACC,KAAL,CAAWC,QAAX,CAAP;MACD,CAFD,CAEE,OAAOC,GAAP,EAAY;QACZ,IAAMC,UAAU,GAAGD,GAAnB;QACAC,UAAU,CAACC,IAAX,GAAkB,kBAAlB;QACAD,UAAU,CAACP,QAAX,GAAsBA,QAAtB;QACAO,UAAU,CAACE,UAAX,GAAwBT,QAAQ,CAACU,MAAjC;QACAH,UAAU,CAACF,QAAX,GAAsBA,QAAtB;QACA,MAAME,UAAN;MACD;IACF,CAb4B,EAc5BL,IAd4B,CAcvB,UAACS,MAAD,EAAY;MAChB,IAAIX,QAAQ,CAACU,MAAT,IAAmB,GAAvB,EAA4B;QAE1BhB,gBAAgB,CACdM,QADc,EAEdW,MAFc,EAGd,wDAAiDX,QAAQ,CAACU,MAA1D,CAHc,CAAhB;MAKD;;MAED,IACE,CAACE,KAAK,CAACC,OAAN,CAAcF,MAAd,CAAD,IACA,CAACd,cAAc,CAACiB,IAAf,CAAoBH,MAApB,EAA4B,MAA5B,CADD,IAEA,CAACd,cAAc,CAACiB,IAAf,CAAoBH,MAApB,EAA4B,QAA5B,CAHH,EAIE;QAEAjB,gBAAgB,CACdM,QADc,EAEdW,MAFc,EAGd,iDACEC,KAAK,CAACC,OAAN,CAAcd,UAAd,IACIA,UAAU,CAACgB,GAAX,CAAe,cAAE;UAAI,SAAE,CAACC,aAAH;QAAgB,CAArC,CADJ,GAEIjB,UAAU,CAACiB,aAHjB,EAG8B,IAH9B,CAHc,CAAhB;MASD;;MACD,OAAOL,MAAP;IACD,CAzC4B;EAyC3B,CAzCJ;AA0CD","names":["throwServerError","Object","prototype","hasOwnProperty","parseAndCheckHttpResponse","operations","response","text","then","JSON","parse","bodyText","err","parseError","name","statusCode","status","result","Array","isArray","call","map","operationName"],"sources":["/Users/henryclark/Desktop/Enquizit/Project/NEDSS-Modernization-1/ui/node_modules/@apollo/src/link/http/parseAndCheckHttpResponse.ts"],"sourcesContent":["import { Operation } from '../core';\nimport { throwServerError } from '../utils';\n\nconst { hasOwnProperty } = Object.prototype;\n\nexport type ServerParseError = Error & {\n  response: Response;\n  statusCode: number;\n  bodyText: string;\n};\n\nexport function parseAndCheckHttpResponse(\n  operations: Operation | Operation[],\n) {\n  return (response: Response) => response\n    .text()\n    .then(bodyText => {\n      try {\n        return JSON.parse(bodyText);\n      } catch (err) {\n        const parseError = err as ServerParseError;\n        parseError.name = 'ServerParseError';\n        parseError.response = response;\n        parseError.statusCode = response.status;\n        parseError.bodyText = bodyText;\n        throw parseError;\n      }\n    })\n    .then((result: any) => {\n      if (response.status >= 300) {\n        // Network error\n        throwServerError(\n          response,\n          result,\n          `Response not successful: Received status code ${response.status}`,\n        );\n      }\n\n      if (\n        !Array.isArray(result) &&\n        !hasOwnProperty.call(result, 'data') &&\n        !hasOwnProperty.call(result, 'errors')\n      ) {\n        // Data error\n        throwServerError(\n          response,\n          result,\n          `Server response was missing for query '${\n            Array.isArray(operations)\n              ? operations.map(op => op.operationName)\n              : operations.operationName\n          }'.`,\n        );\n      }\n      return result;\n    });\n}\n"]},"metadata":{},"sourceType":"module"}