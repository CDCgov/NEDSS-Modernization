{"ast":null,"code":"import _slicedToArray from\"/Users/henryclark/Desktop/Enquizit/Project/NEDSS-Modernization-1/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Accordion,Button,Form,Grid}from'@trussworks/react-uswds';import{useState}from'react';import{useForm}from'react-hook-form';import{EventType,useFindPatientsByEventLazyQuery}from'../../generated/graphql/schema';import{EventTypes}from'./EventType';import{GeneralSearch}from'./generalSearch';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var EventSearch=function EventSearch(_ref){var onSearch=_ref.onSearch;// const [getFilteredData] = useFindPatientsByFilterLazyQuery();\nvar _useFindPatientsByEve=useFindPatientsByEventLazyQuery(),_useFindPatientsByEve2=_slicedToArray(_useFindPatientsByEve,1),getEventSearch=_useFindPatientsByEve2[0];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),eventSearchType=_useState2[0],setEventSearchType=_useState2[1];var methods=useForm();var handleSubmit=methods.handleSubmit,control=methods.control,reset=methods.reset;var eventSearchItems=[{title:'Event Type',content:/*#__PURE__*/_jsx(EventTypes,{onChangeMethod:function onChangeMethod(e){setEventSearchType(e);},control:control,name:\"eventType\"}),expanded:true,id:'1',headingLevel:'h4',className:'accordian-item'}];var eventSearchFilteredItem=[{title:'General Search',content:/*#__PURE__*/_jsx(GeneralSearch,{searchType:eventSearchType,control:control}),expanded:true,id:'2',headingLevel:'h4',className:'accordian-item'}];var onSubmit=function onSubmit(body){var filterData={eventType:eventSearchType};if(eventSearchType===EventType.Investigation){filterData.investigationFilter={// TODO inject actual values\n// conditions: ['Bacterial Vaginosis'],\n// caseStatuses: {\n//     includeUnassigned: true,\n//     statusList: [\n//         CaseStatus.Confirmed,\n//         CaseStatus.NotACase,\n//         CaseStatus.Probable,\n//         CaseStatus.Suspect,\n//         CaseStatus.Unknown\n//     ]\n// }\n};}else if(eventSearchType===EventType.LaboratoryReport){filterData.laboratoryReportFilter={// TODO inject actual values\n// resultedTest: 'Acid-Fast Stain'\n};}else{// no search type selected\nreturn;}// getFilteredData({\n//     variables: {\n//         filter: rowData\n//     }\n// });\n// const investigationFilter = {\n//     conditions: ['Chancroid'],\n//     programAreas: ['STD'],\n//     jurisdictions: ['130006'], // Clayton County\n//     pregnancyStatus: 'YES',\n//     eventIdType: 'INVESTIGATION_ID',\n//     eventId: 'CAS10001003GA01',\n//     eventDateSearch: {\n//         eventDateType: 'INVESTIGATION_CREATE_DATE',\n//         from: '1970-01-01T00:00:00Z',\n//         to: '2023-01-01T00:00:00Z'\n//     },\n//     createdBy: '10054490', // Id of user\n//     lastUpdatedBy: '10054490', // Id of user\n//     providerFacilitySearch: {\n//         entityType: 'FACILITY',\n//         id: '10003001'\n//     }, // investigatorId: \"10003004\" - investigatorId is mutually exclusive with providerFacilitySearch\n//     investigationStatus: 'CLOSED',\n//     outbreakNames: ['WHS'],\n//     caseStatuses: {\n//         includeUnassigned: true,\n//         statusList: ['UNKNOWN']\n//     }\n//     // notificationStatuses: {\n//     // includeUnassigned:true\n//     // statusList: [APPROVED]\n//     // }\n//     // processingStatuses: {\n//     // includeUnassigned:true\n//     // statusList: [AWAITING_INTERVIEW]\n//     // }\n// };\ngetEventSearch({variables:{filter:filterData,page:{pageNumber:0,pageSize:50}}}).then(function(re){onSearch(re.data);});};return/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),className:\"width-full maxw-full\",children:[/*#__PURE__*/_jsx(Accordion,{items:eventSearchItems,multiselectable:true}),eventSearchType&&eventSearchType!=='- Select -'&&/*#__PURE__*/_jsx(Accordion,{items:eventSearchFilteredItem,multiselectable:true}),/*#__PURE__*/_jsx(Grid,{col:12,className:\"margin-top-5 padding-x-3\",children:/*#__PURE__*/_jsx(Button,{className:\"width-full\",type:'submit',children:\"Search\"})}),/*#__PURE__*/_jsx(Grid,{col:12,className:\"padding-x-3\",children:/*#__PURE__*/_jsx(Button,{className:\"width-full\",type:'button',onClick:function onClick(){return reset({lastName:'',firstName:'',city:'',state:'',zip:'',patientId:''});},outline:true,children:\"Clear\"})})]});};","map":{"version":3,"names":["Accordion","Button","Form","Grid","useState","useForm","EventType","useFindPatientsByEventLazyQuery","EventTypes","GeneralSearch","EventSearch","onSearch","getEventSearch","eventSearchType","setEventSearchType","methods","handleSubmit","control","reset","eventSearchItems","title","content","e","expanded","id","headingLevel","className","eventSearchFilteredItem","onSubmit","body","filterData","eventType","Investigation","investigationFilter","LaboratoryReport","laboratoryReportFilter","variables","filter","page","pageNumber","pageSize","then","re","data","lastName","firstName","city","state","zip","patientId"],"sources":["/Users/henryclark/Desktop/Enquizit/Project/NEDSS-Modernization-1/ui/src/components/EventSearch/index.tsx"],"sourcesContent":["import { Accordion, Button, Form, Grid } from '@trussworks/react-uswds';\nimport { AccordionItemProps } from '@trussworks/react-uswds/lib/components/Accordion/Accordion';\nimport { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { EventFilter, EventType, useFindPatientsByEventLazyQuery } from '../../generated/graphql/schema';\nimport { EventTypes } from './EventType';\nimport { GeneralSearch } from './generalSearch';\n\ntype EventSearchProps = {\n    onSearch: (data: any) => void;\n};\n\nexport const EventSearch = ({ onSearch }: EventSearchProps) => {\n    // const [getFilteredData] = useFindPatientsByFilterLazyQuery();\n    const [getEventSearch] = useFindPatientsByEventLazyQuery();\n\n    const [eventSearchType, setEventSearchType] = useState<any>('');\n\n    const methods = useForm();\n\n    const { handleSubmit, control, reset } = methods;\n\n    const eventSearchItems: AccordionItemProps[] = [\n        {\n            title: 'Event Type',\n            content: (\n                <EventTypes\n                    onChangeMethod={(e) => {\n                        setEventSearchType(e);\n                    }}\n                    control={control}\n                    name=\"eventType\"\n                />\n            ),\n            expanded: true,\n            id: '1',\n            headingLevel: 'h4',\n            className: 'accordian-item'\n        }\n    ];\n\n    const eventSearchFilteredItem: AccordionItemProps[] = [\n        {\n            title: 'General Search',\n            content: <GeneralSearch searchType={eventSearchType} control={control} />,\n            expanded: true,\n            id: '2',\n            headingLevel: 'h4',\n            className: 'accordian-item'\n        }\n    ];\n\n    const onSubmit: any = (body: any) => {\n        const filterData: EventFilter = {\n            eventType: eventSearchType\n        };\n        if (eventSearchType === EventType.Investigation) {\n            filterData.investigationFilter = {\n                // TODO inject actual values\n                // conditions: ['Bacterial Vaginosis'],\n                // caseStatuses: {\n                //     includeUnassigned: true,\n                //     statusList: [\n                //         CaseStatus.Confirmed,\n                //         CaseStatus.NotACase,\n                //         CaseStatus.Probable,\n                //         CaseStatus.Suspect,\n                //         CaseStatus.Unknown\n                //     ]\n                // }\n            };\n        } else if (eventSearchType === EventType.LaboratoryReport) {\n            filterData.laboratoryReportFilter = {\n                // TODO inject actual values\n                // resultedTest: 'Acid-Fast Stain'\n            };\n        } else {\n            // no search type selected\n            return;\n        }\n\n        // getFilteredData({\n        //     variables: {\n        //         filter: rowData\n        //     }\n        // });\n        // const investigationFilter = {\n        //     conditions: ['Chancroid'],\n        //     programAreas: ['STD'],\n        //     jurisdictions: ['130006'], // Clayton County\n        //     pregnancyStatus: 'YES',\n        //     eventIdType: 'INVESTIGATION_ID',\n        //     eventId: 'CAS10001003GA01',\n        //     eventDateSearch: {\n        //         eventDateType: 'INVESTIGATION_CREATE_DATE',\n        //         from: '1970-01-01T00:00:00Z',\n        //         to: '2023-01-01T00:00:00Z'\n        //     },\n        //     createdBy: '10054490', // Id of user\n        //     lastUpdatedBy: '10054490', // Id of user\n        //     providerFacilitySearch: {\n        //         entityType: 'FACILITY',\n        //         id: '10003001'\n        //     }, // investigatorId: \"10003004\" - investigatorId is mutually exclusive with providerFacilitySearch\n        //     investigationStatus: 'CLOSED',\n        //     outbreakNames: ['WHS'],\n        //     caseStatuses: {\n        //         includeUnassigned: true,\n        //         statusList: ['UNKNOWN']\n        //     }\n        //     // notificationStatuses: {\n        //     // includeUnassigned:true\n        //     // statusList: [APPROVED]\n        //     // }\n        //     // processingStatuses: {\n        //     // includeUnassigned:true\n        //     // statusList: [AWAITING_INTERVIEW]\n        //     // }\n        // };\n        getEventSearch({\n            variables: {\n                filter: filterData,\n                page: {\n                    pageNumber: 0,\n                    pageSize: 50\n                }\n            }\n        }).then((re) => {\n            onSearch(re.data);\n        });\n    };\n\n    return (\n        <Form onSubmit={handleSubmit(onSubmit)} className=\"width-full maxw-full\">\n            <Accordion items={eventSearchItems} multiselectable={true} />\n            {eventSearchType && eventSearchType !== '- Select -' && (\n                <Accordion items={eventSearchFilteredItem} multiselectable={true} />\n            )}\n            <Grid col={12} className=\"margin-top-5 padding-x-3\">\n                <Button className=\"width-full\" type={'submit'}>\n                    Search\n                </Button>\n            </Grid>\n            <Grid col={12} className=\"padding-x-3\">\n                <Button\n                    className=\"width-full\"\n                    type={'button'}\n                    onClick={() =>\n                        reset({\n                            lastName: '',\n                            firstName: '',\n                            city: '',\n                            state: '',\n                            zip: '',\n                            patientId: ''\n                        })\n                    }\n                    outline>\n                    Clear\n                </Button>\n            </Grid>\n        </Form>\n    );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}