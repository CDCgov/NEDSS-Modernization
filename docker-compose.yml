services:
  modernization-api:
    build:
      context: ./
      dockerfile: ./apps/modernization-api/Dockerfile
    container_name: modernization-api
    environment:
      - NBS_DATASOURCE_SERVER=nbs-mssql
      - NBS_ELASTICSEARCH_SERVER=elasticsearch
      - NBS_WILDFLY_SERVER=wildfly:7001
    depends_on:
      - cdc-address-api
    networks:
      - nbs

  pagebuilder-api:
    build:
      context: ./
      dockerfile: ./apps/question-bank/Dockerfile
    container_name: pagebuilder-api
    environment:
      - NBS_DATASOURCE_SERVER=nbs-mssql
    networks:
      - nbs

  cdc-address-api:
    image: ghcr.io/cdcgov/phdi/ingestion:latest
    container_name: cdc-address-api
#    ports:
#      - 8081:8080
    networks:
      - nbs

networks:
  nbs:
    name: nbs
    external: true      
