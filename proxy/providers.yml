http:
    routers:
        # Modernization app
        reactForward:
            service: react
            rule: 'PathPrefix(`/`)'
        # NBS search page redirects to modernization app
        searchForward:
            service: react
            rule: 'Path(`/nbs/MyTaskList1.do`)'
            middlewares:
                - setSearchPath
        # All /nbs prefixes go to NBS
        nbsForward:
            service: nbs
            rule: 'PathPrefix(`/nbs`)'
    middlewares:
        setSearchPath:
            replacePath:
                path: '/search'
    services:
        react:
            loadBalancer:
                servers:
                    - url: 'http://modernization:8080/'
        nbs:
            loadBalancer:
                servers:
                    - url: 'http://wildfly:7001/'
